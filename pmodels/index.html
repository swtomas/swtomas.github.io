<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Модели Pollinations.ai</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
        .unknown-value {
            color: #ef4444;
            font-weight: 500;
        }
    </style>
</head>
<body class="text-gray-200 antialiased">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 id="main-header" class="text-4xl md:text-5xl font-bold text-white mb-2">Модели Pollinations.ai</h1>
            <p id="main-subtitle" class="text-lg text-gray-400">Актуальный список доступных AI моделей и их характеристики</p>
        </header>

        <main id="models-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <div id="loading-state" class="col-span-full flex flex-col items-center justify-center h-64 bg-gray-800/50 rounded-lg">
                <svg class="animate-spin h-10 w-10 text-white mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <p id="loading-text" class="text-xl text-gray-300">Загрузка моделей...</p>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('models-container');
            const apiUrl = 'https://text.pollinations.ai/models';

            const userLang = navigator.language || navigator.userLanguage;
            const isRu = userLang.startsWith('ru');
            const lang = isRu ? 'ru' : 'en';

            const translations = {
                ru: {
                    htmlLang: 'ru',
                    title: 'Модели Pollinations.ai',
                    header: 'Модели Pollinations.ai',
                    subtitle: 'Актуальный список доступных AI моделей и их характеристики',
                    loading: 'Загрузка моделей...',
                    errorHeader: 'Ошибка',
                    errorMessage: 'Сервер pollinations.ai не ответил. Попробуйте обновить страницу позже.',
                    unknown: 'неизвестно',
                    keyTranslations: {
                        maxInputChars: 'Макс. символов',
                        reasoning: 'Reasoning',
                        supportsSystemMessages: 'Системные сообщения',
                        provider: 'Провайдер',
                        tier: 'Уровень',
                        aliases: 'Псевдонимы',
                        input_modalities: 'Входные модальности',
                        output_modalities: 'Выходные модальности',
                        vision: 'Зрение (Vision)',
                        audio: 'Аудио'
                    }
                },
                en: {
                    htmlLang: 'en',
                    title: 'Pollinations.ai Models',
                    header: 'Pollinations.ai Models',
                    subtitle: 'A current list of available AI models and their characteristics',
                    loading: 'Loading models...',
                    errorHeader: 'Error',
                    errorMessage: 'The pollinations.ai server did not respond. Please try refreshing the page later.',
                    unknown: 'unknown',
                    keyTranslations: {
                        maxInputChars: 'Max Input Chars',
                        reasoning: 'Reasoning',
                        supportsSystemMessages: 'System Messages',
                        provider: 'Provider',
                        tier: 'Tier',
                        aliases: 'Aliases',
                        input_modalities: 'Input Modalities',
                        output_modalities: 'Output Modalities',
                        vision: 'Vision',
                        audio: 'Audio'
                    }
                }
            };
            
            const T = translations[lang];

            document.documentElement.lang = T.htmlLang;
            document.getElementById('page-title').textContent = T.title;
            document.getElementById('main-header').textContent = T.header;
            document.getElementById('main-subtitle').textContent = T.subtitle;
            document.getElementById('loading-text').textContent = T.loading;

            const checkIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-circle-2 text-green-400"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m9 12 2 2 4-4"/></svg>`;
            const xIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-circle text-red-400"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>`;
            
            const displayValue = (value) => {
                if (value === null || typeof value === 'undefined' || (Array.isArray(value) && value.length === 0)) {
                    return `<span class="unknown-value">${T.unknown}</span>`;
                }
                if (typeof value === 'boolean') {
                    return value ? 'Yes' : 'No';
                }
                if (Array.isArray(value)) {
                    return value.map(item => `<span class="bg-gray-600 text-gray-200 text-xs font-medium mr-2 px-2.5 py-0.5 rounded">${item}</span>`).join(' ');
                }
                return value;
            };

            const displayIconValue = (value) => {
                 if (typeof value === 'boolean') {
                    return value ? checkIcon : xIcon;
                }
                return '<span class="unknown-value text-sm">?</span>';
            };

            const fetchModels = async () => {
                try {
                    const response = await fetch(apiUrl);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const models = await response.json();
                    
                    container.innerHTML = '';
                    
                    models.forEach(model => {
                        const card = document.createElement('div');
                        card.className = 'bg-gray-800 border border-gray-700 rounded-lg shadow-lg p-5 flex flex-col transition-all duration-300 hover:shadow-cyan-500/20 hover:border-cyan-500/50';
                        
                        const booleanFeatures = {
                           reasoning: model.reasoning,
                           supportsSystemMessages: model.supportsSystemMessages,
                           vision: model.vision,
                           audio: model.audio
                        };

                        const otherDetails = {
                           maxInputChars: model.maxInputChars,
                           provider: model.provider,
                           tier: model.tier,
                           aliases: model.aliases,
                           input_modalities: model.input_modalities,
                           output_modalities: model.output_modalities,
                        };

                        let booleanFeaturesHtml = Object.entries(booleanFeatures).map(([key, value]) => `
                            <div class="flex items-center space-x-2 bg-gray-700/50 p-2 rounded-md">
                                ${displayIconValue(value)}
                                <span class="text-sm text-gray-300">${T.keyTranslations[key] || key}</span>
                            </div>
                        `).join('');

                        let otherDetailsHtml = Object.entries(otherDetails).map(([key, value]) => `
                            <div class="flex justify-between items-start py-2 border-b border-gray-700/50 min-w-0">
                                <span class="text-sm font-medium text-gray-400 flex-shrink-0 pr-2 whitespace-nowrap">${T.keyTranslations[key] || key}:</span>
                                <span class="text-sm text-right text-white font-semibold break-words">${displayValue(value)}</span>
                            </div>
                        `).join('');

                        card.innerHTML = `
                            <div class="flex-grow">
                                <h2 class="text-xl font-bold text-white">${displayValue(model.name)}</h2>
                                <p class="text-sm text-gray-400 mt-1 mb-4 min-h-[40px]">${displayValue(model.description)}</p>

                                <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 mb-4">
                                    ${booleanFeaturesHtml}
                                </div>
                                
                                <div class="space-y-1">
                                    ${otherDetailsHtml}
                                </div>
                            </div>
                        `;
                        container.appendChild(card);
                    });

                } catch (error) {
                    console.error("Ошибка при получении данных:", error);
                    container.innerHTML = `
                        <div class="col-span-full flex flex-col items-center justify-center h-64 bg-red-900/20 border border-red-500/30 rounded-lg text-center p-4">
                             <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-server-crash text-red-400 mb-4"><path d="M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2"/><path d="M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2"/><path d="M6 6h.01"/><path d="M6 18h.01"/><path d="m13 6-4 6h6l-4 6"/></svg>
                            <h2 class="text-2xl font-semibold text-red-300">${T.errorHeader}</h2>
                            <p class="text-red-400">${T.errorMessage}</p>
                        </div>
                    `;
                }
            };

            fetchModels();
        });
    </script>
</body>
</html>
